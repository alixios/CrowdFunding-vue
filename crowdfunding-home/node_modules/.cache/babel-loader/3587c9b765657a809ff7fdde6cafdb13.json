{"ast":null,"code":"export default {\n  name: \"ProgressIndex\",\n\n  data() {\n    return {\n      dataList: [],\n      projectId: \"\"\n    };\n  },\n\n  created() {\n    this.initProgressList();\n  },\n\n  methods: {\n    initProgressList() {\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      const projectId = arr[4];\n      this.projectId = projectId;\n\n      if (projectId) {\n        console.log(\"====\" + this.projectId);\n        this.axios.get(`/api/home/progress/index/${projectId}`).then(({\n          data\n        }) => {\n          this.dataList = data.data;\n        });\n      }\n    },\n\n    editProgress(projectId) {\n      this.$router.push({\n        path: \"/home/progress/add/\" + projectId\n      });\n    },\n\n    deleteProgress(progressId) {\n      this.axios.delete(`/api/home/progress/delete/${progressId}`).then(({\n        data\n      }) => {\n        if (data.flag) {\n          this.$message.success(data.message);\n          this.initFeedBackList();\n        } else {\n          this.$message.error(data.message);\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsEA;EACAA,qBADA;;EAEAC;IACA;MACAC,YADA;MAEAC;IAFA;EAIA,CAPA;;EAQAC;IACA;EACA,CAVA;;EAWAC;IACAC;MACA;MACA;MACA;MACA;;MACA;QACAC;QACA;UAAAN;QAAA;UACA;QACA,CAFA;MAGA;IACA,CAZA;;IAaAO;MACA;QAAAC;MAAA;IACA,CAfA;;IAgBAC;MACA;QAAAT;MAAA;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA;;EAzBA;AAXA","names":["name","data","dataList","projectId","created","methods","initProgressList","console","editProgress","path","deleteProgress"],"sourceRoot":"src/views/progress","sources":["ProgressIndex.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-card\">\r\n    <el-button\r\n        type=\"success\"\r\n        size=\"max\"\r\n        style=\"float: right;  margin-bottom: 10px\"\r\n        @click=\"editProgress(projectId)\"\r\n    >\r\n      添加进展\r\n    </el-button>\r\n    <!-- 表格展示 -->\r\n    <el-table\r\n        border\r\n        :data=\"dataList\"\r\n        v-loading=\"loading\"\r\n    >\r\n\r\n\r\n      <!-- 文章标题 -->\r\n      <el-table-column prop=\"caption\" label=\"回馈标题\" align=\"center\"/>\r\n      <!-- 文章标题 -->\r\n      <el-table-column prop=\"projectCaption\" label=\"项目标题\" align=\"center\"/>\r\n\r\n      <!-- 内容  -->\r\n      <el-table-column prop=\"price\"  label=\"内容\" align=\"center\"/>\r\n      <!-- 图片 -->\r\n      <el-table-column\r\n          prop=\"headPic\"\r\n          label=\"图片\"\r\n\r\n          align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-image\r\n              class=\"article-cover\"\r\n              :src=\"\r\n              scope.row.headPic\r\n                ? scope.row.headPic\r\n                : 'https://www.static.talkxj.com/articles/c5cc2b2561bd0e3060a500198a4ad37d.png'\r\n            \"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              style=\"margin-left: 5px\"\r\n              @click=\"editFeedBack(scope.row.id)\"\r\n          >\r\n            编辑\r\n          </el-button>\r\n          <el-popconfirm\r\n              title=\"确定删除吗？\"\r\n              style=\"margin-left: 5px\"\r\n              @confirm=\"deleteFeedBack(scope.row.id)\"\r\n          >\r\n            <el-button size=\"mini\" type=\"danger\" slot=\"reference\">\r\n              删除\r\n            </el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\nname: \"ProgressIndex\",\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      projectId: \"\",\r\n    }\r\n  },\r\n  created() {\r\n    this.initProgressList()\r\n  },\r\n  methods: {\r\n    initProgressList() {\r\n      const path = this.$route.path;\r\n      const arr = path.split(\"/\");\r\n      const projectId = arr[4];\r\n      this.projectId = projectId\r\n      if (projectId) {\r\n        console.log(\"====\" + this.projectId)\r\n        this.axios.get(`/api/home/progress/index/${projectId}`).then(({data}) => {\r\n          this.dataList = data.data;\r\n        });\r\n      }\r\n    },\r\n    editProgress(projectId) {\r\n      this.$router.push({path: \"/home/progress/add/\" + projectId});\r\n    },\r\n    deleteProgress(progressId) {\r\n      this.axios.delete(`/api/home/progress/delete/${progressId}`).then(({data}) => {\r\n        if (data.flag) {\r\n          this.$message.success(data.message)\r\n          this.initFeedBackList()\r\n        } else {\r\n          this.$message.error(data.message)\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main-card {\r\n  padding-left: 80px;\r\n  padding-right: 80px;\r\n}\r\n\r\n.article-cover {\r\n  position: relative;\r\n  width: 70px;\r\n\r\n}\r\n\r\n.article-cover::after {\r\n  content: \"\";\r\n  background: rgba(0, 0, 0, 0.3);\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}